"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const validate_settings_1 = require("./validate-settings");
const REPORT_PATH = ({ projectId, reportId }) => `runs/${projectId}/${reportId}`;
const HTTP_URL = (url) => `http://${url}`;
function createURL(...args) {
    return String(new URL(...args));
}
function ensureHTTPProtocol(url) {
    try {
        return createURL(url);
    }
    catch (error) {
        return createURL(HTTP_URL(url));
    }
}
function default_1(reportId, dashboardUrl, authenticationToken) {
    const { projectId } = validate_settings_1.decodeAuthenticationToken(authenticationToken);
    const reportPath = REPORT_PATH({ projectId, reportId: encodeURIComponent(reportId) });
    return createURL(reportPath, ensureHTTPProtocol(dashboardUrl));
}
exports.default = default_1;
