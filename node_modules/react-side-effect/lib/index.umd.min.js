!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e=e||self).withSideEffect=t(e.React)}(this,function(e){"use strict";var t="default"in e?e.default:e;function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),u=Object.keys(t);if(i.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),f=0;f<i.length;f++){var a=i[f];if(!c(a))return!1;var p=e[a],d=t[a];if(!1===(o=n?n.call(r,p,d,a):void 0)||void 0===o&&p!==d)return!1}return!0},o=!("undefined"==typeof window||!window.document||!window.document.createElement);return function(i,u,c){if("function"!=typeof i)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof u)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==c&&"function"!=typeof c)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(f){if("function"!=typeof f)throw new Error("Expected WrappedComponent to be a React component.");var a,p=[];function d(){a=i(p.map(function(e){return e.props})),l.canUseDOM?u(a):c&&(a=c(a))}var l=function(e){var n,o;function i(){return e.apply(this,arguments)||this}o=e,(n=i).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,i.peek=function(){return a},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=a;return a=void 0,p=[],e};var u=i.prototype;return u.shouldComponentUpdate=function(e){return!r(e,this.props)},u.componentWillMount=function(){p.push(this),d()},u.componentDidUpdate=function(){d()},u.componentWillUnmount=function(){var e=p.indexOf(this);p.splice(e,1),d()},u.render=function(){return t.createElement(f,this.props)},i}(e.Component);return n(l,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(f)+")"),n(l,"canUseDOM",o),l}}});
