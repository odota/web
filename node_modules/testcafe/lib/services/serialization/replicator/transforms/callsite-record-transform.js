"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const prerender_callsite_1 = __importDefault(require("../../../../utils/prerender-callsite"));
const base_transform_1 = __importDefault(require("./base-transform"));
const constants_1 = require("../../../../test-run/execute-js-expression/constants");
class CallsiteRecordTransform extends base_transform_1.default {
    constructor() {
        super(constants_1.CALLSITE_RECORD_CLASS_NAME);
    }
    shouldTransform(_, val) {
        return !!val &&
            (!!val.constructor && val.constructor.name === constants_1.CALLSITE_RECORD_CLASS_NAME) &&
            (!!val.filename && val.filename !== constants_1.ERROR_FILENAME); // Don't serialize callsites for RAW API)
    }
    toSerializable(callsite) {
        return prerender_callsite_1.default(callsite);
    }
}
exports.default = CallsiteRecordTransform;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsbHNpdGUtcmVjb3JkLXRyYW5zZm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9zZXJpYWxpemF0aW9uL3JlcGxpY2F0b3IvdHJhbnNmb3Jtcy9jYWxsc2l0ZS1yZWNvcmQtdHJhbnNmb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsOEZBQTJGO0FBQzNGLHNFQUE2QztBQUM3QyxvRkFBa0g7QUFNbEgsTUFBcUIsdUJBQXdCLFNBQVEsd0JBQWE7SUFDOUQ7UUFDSSxLQUFLLENBQUMsc0NBQTBCLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRU0sZUFBZSxDQUFFLENBQVUsRUFBRSxHQUF1QjtRQUN2RCxPQUFPLENBQUMsQ0FBQyxHQUFHO1lBQ1IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLElBQUksS0FBSyxzQ0FBMEIsQ0FBQztZQUMxRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssMEJBQWMsQ0FBQyxDQUFDLENBQUMseUNBQXlDO0lBQ3RHLENBQUM7SUFFTSxjQUFjLENBQUUsUUFBd0I7UUFDM0MsT0FBTyw0QkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBQ0o7QUFkRCwwQ0FjQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbGxzaXRlUmVjb3JkIH0gZnJvbSAnY2FsbHNpdGUtcmVjb3JkJztcbmltcG9ydCBwcmVyZW5kZXJDYWxsc2l0ZSwgeyBSZW5kZXJlZENhbGxzaXRlIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvcHJlcmVuZGVyLWNhbGxzaXRlJztcbmltcG9ydCBCYXNlVHJhbnNmb3JtIGZyb20gJy4vYmFzZS10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgRVJST1JfRklMRU5BTUUsIENBTExTSVRFX1JFQ09SRF9DTEFTU19OQU1FIH0gZnJvbSAnLi4vLi4vLi4vLi4vdGVzdC1ydW4vZXhlY3V0ZS1qcy1leHByZXNzaW9uL2NvbnN0YW50cyc7XG5cbmludGVyZmFjZSBDYWxsc2l0ZVJlY29yZExpa2Uge1xuICAgIGZpbGVuYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbGxzaXRlUmVjb3JkVHJhbnNmb3JtIGV4dGVuZHMgQmFzZVRyYW5zZm9ybSB7XG4gICAgcHVibGljIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIoQ0FMTFNJVEVfUkVDT1JEX0NMQVNTX05BTUUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG91bGRUcmFuc2Zvcm0gKF86IHVua25vd24sIHZhbDogQ2FsbHNpdGVSZWNvcmRMaWtlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXZhbCAmJlxuICAgICAgICAgICAgKCEhdmFsLmNvbnN0cnVjdG9yICYmIHZhbC5jb25zdHJ1Y3Rvci5uYW1lID09PSBDQUxMU0lURV9SRUNPUkRfQ0xBU1NfTkFNRSkgJiZcbiAgICAgICAgICAgICghIXZhbC5maWxlbmFtZSAmJiB2YWwuZmlsZW5hbWUgIT09IEVSUk9SX0ZJTEVOQU1FKTsgLy8gRG9uJ3Qgc2VyaWFsaXplIGNhbGxzaXRlcyBmb3IgUkFXIEFQSSlcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TZXJpYWxpemFibGUgKGNhbGxzaXRlOiBDYWxsc2l0ZVJlY29yZCk6IFJlbmRlcmVkQ2FsbHNpdGUge1xuICAgICAgICByZXR1cm4gcHJlcmVuZGVyQ2FsbHNpdGUoY2FsbHNpdGUpO1xuICAgIH1cbn1cbiJdfQ==