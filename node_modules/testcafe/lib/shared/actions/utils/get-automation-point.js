"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const adapter_1 = require("../../adapter");
const axis_values_1 = __importDefault(require("../../utils/values/axis-values"));
function getAutomationPoint(element, offset) {
    return adapter_1.adapter.PromiseCtor.resolve(adapter_1.adapter.dom.isDocumentElement(element))
        .then(isDocEl => {
        if (isDocEl)
            return new axis_values_1.default(0, 0);
        const roundFn = adapter_1.adapter.browser.isFirefox ? Math.ceil : Math.round;
        return adapter_1.adapter.PromiseCtor.resolve(adapter_1.adapter.position.getOffsetPosition(element, roundFn))
            .then(elementOffset => axis_values_1.default.create(elementOffset));
    })
        .then(point => point.add(offset));
}
exports.default = getAutomationPoint;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWF1dG9tYXRpb24tcG9pbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2hhcmVkL2FjdGlvbnMvdXRpbHMvZ2V0LWF1dG9tYXRpb24tcG9pbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSwyQ0FBd0M7QUFDeEMsaUZBQTRFO0FBRzVFLFNBQXdCLGtCQUFrQixDQUFLLE9BQVUsRUFBRSxNQUE4QjtJQUNyRixPQUFPLGlCQUFPLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxpQkFBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNyRSxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7UUFDWixJQUFJLE9BQU87WUFDUCxPQUFPLElBQUkscUJBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFaEMsTUFBTSxPQUFPLEdBQUcsaUJBQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBRW5FLE9BQU8saUJBQU8sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLGlCQUFPLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQzthQUNuRixJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxxQkFBVSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQ2pFLENBQUMsQ0FBQztTQUNELElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUMxQyxDQUFDO0FBWkQscUNBWUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhZGFwdGVyIH0gZnJvbSAnLi4vLi4vYWRhcHRlcic7XG5pbXBvcnQgQXhpc1ZhbHVlcywgeyBBeGlzVmFsdWVzRGF0YSB9IGZyb20gJy4uLy4uL3V0aWxzL3ZhbHVlcy9heGlzLXZhbHVlcyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QXV0b21hdGlvblBvaW50PEU+IChlbGVtZW50OiBFLCBvZmZzZXQ6IEF4aXNWYWx1ZXNEYXRhPG51bWJlcj4pOiBQcm9taXNlPEF4aXNWYWx1ZXM8bnVtYmVyPj4ge1xuICAgIHJldHVybiBhZGFwdGVyLlByb21pc2VDdG9yLnJlc29sdmUoYWRhcHRlci5kb20uaXNEb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpXG4gICAgICAgIC50aGVuKGlzRG9jRWwgPT4ge1xuICAgICAgICAgICAgaWYgKGlzRG9jRWwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBeGlzVmFsdWVzKDAsIDApO1xuXG4gICAgICAgICAgICBjb25zdCByb3VuZEZuID0gYWRhcHRlci5icm93c2VyLmlzRmlyZWZveCA/IE1hdGguY2VpbCA6IE1hdGgucm91bmQ7XG5cbiAgICAgICAgICAgIHJldHVybiBhZGFwdGVyLlByb21pc2VDdG9yLnJlc29sdmUoYWRhcHRlci5wb3NpdGlvbi5nZXRPZmZzZXRQb3NpdGlvbihlbGVtZW50LCByb3VuZEZuKSlcbiAgICAgICAgICAgICAgICAudGhlbihlbGVtZW50T2Zmc2V0ID0+IEF4aXNWYWx1ZXMuY3JlYXRlKGVsZW1lbnRPZmZzZXQpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocG9pbnQgPT4gcG9pbnQuYWRkKG9mZnNldCkpO1xufVxuIl19