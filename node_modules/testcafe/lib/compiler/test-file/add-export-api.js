"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fixture_1 = __importDefault(require("../../api/structure/fixture"));
const test_1 = __importDefault(require("../../api/structure/test"));
function default_1(testFile, exportableLibExports, isCompilerServiceMode = false) {
    Object.defineProperty(exportableLibExports, 'fixture', {
        get: () => new fixture_1.default(testFile),
        configurable: true,
    });
    Object.defineProperty(exportableLibExports, 'test', {
        get: () => {
            // NOTE: After wrapping the "import { test } from 'testcafe'" statement
            // in service functions of the 'esm' module
            // the 'test' directive executed a few times before the 'fixture' directive.
            // We need to pass an additional flag to ensure correct 'Test' function loading.
            return new test_1.default(testFile, isCompilerServiceMode);
        },
        configurable: true,
    });
}
exports.default = default_1;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLWV4cG9ydC1hcGkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcGlsZXIvdGVzdC1maWxlL2FkZC1leHBvcnQtYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsMEVBQWtEO0FBQ2xELG9FQUE0QztBQUc1QyxtQkFBeUIsUUFBa0IsRUFBRSxvQkFBeUIsRUFBRSxxQkFBcUIsR0FBRyxLQUFLO0lBQ2pHLE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsU0FBUyxFQUFFO1FBQ25ELEdBQUcsRUFBVyxHQUFHLEVBQUUsQ0FBQyxJQUFJLGlCQUFPLENBQUMsUUFBUSxDQUFDO1FBQ3pDLFlBQVksRUFBRSxJQUFJO0tBQ3JCLENBQUMsQ0FBQztJQUVILE1BQU0sQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsTUFBTSxFQUFFO1FBQ2hELEdBQUcsRUFBRSxHQUFHLEVBQUU7WUFDTix1RUFBdUU7WUFDdkUsMkNBQTJDO1lBQzNDLDRFQUE0RTtZQUM1RSxnRkFBZ0Y7WUFDaEYsT0FBTyxJQUFJLGNBQUksQ0FBQyxRQUFRLEVBQUUscUJBQXFCLENBQUMsQ0FBQztRQUNyRCxDQUFDO1FBQ0QsWUFBWSxFQUFFLElBQUk7S0FDckIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQWhCRCw0QkFnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVzdEZpbGUgZnJvbSAnLi4vLi4vYXBpL3N0cnVjdHVyZS90ZXN0LWZpbGUnO1xuaW1wb3J0IEZpeHR1cmUgZnJvbSAnLi4vLi4vYXBpL3N0cnVjdHVyZS9maXh0dXJlJztcbmltcG9ydCBUZXN0IGZyb20gJy4uLy4uL2FwaS9zdHJ1Y3R1cmUvdGVzdCc7XG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHRlc3RGaWxlOiBUZXN0RmlsZSwgZXhwb3J0YWJsZUxpYkV4cG9ydHM6IGFueSwgaXNDb21waWxlclNlcnZpY2VNb2RlID0gZmFsc2UpOiB2b2lkIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0YWJsZUxpYkV4cG9ydHMsICdmaXh0dXJlJywge1xuICAgICAgICBnZXQ6ICAgICAgICAgICgpID0+IG5ldyBGaXh0dXJlKHRlc3RGaWxlKSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydGFibGVMaWJFeHBvcnRzLCAndGVzdCcsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOT1RFOiBBZnRlciB3cmFwcGluZyB0aGUgXCJpbXBvcnQgeyB0ZXN0IH0gZnJvbSAndGVzdGNhZmUnXCIgc3RhdGVtZW50XG4gICAgICAgICAgICAvLyBpbiBzZXJ2aWNlIGZ1bmN0aW9ucyBvZiB0aGUgJ2VzbScgbW9kdWxlXG4gICAgICAgICAgICAvLyB0aGUgJ3Rlc3QnIGRpcmVjdGl2ZSBleGVjdXRlZCBhIGZldyB0aW1lcyBiZWZvcmUgdGhlICdmaXh0dXJlJyBkaXJlY3RpdmUuXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHBhc3MgYW4gYWRkaXRpb25hbCBmbGFnIHRvIGVuc3VyZSBjb3JyZWN0ICdUZXN0JyBmdW5jdGlvbiBsb2FkaW5nLlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXN0KHRlc3RGaWxlLCBpc0NvbXBpbGVyU2VydmljZU1vZGUpO1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG4iXX0=