"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const render_callsite_sync_1 = __importDefault(require("../utils/render-callsite-sync"));
const create_stack_filter_1 = __importDefault(require("../errors/create-stack-filter"));
const get_renderes_1 = __importDefault(require("../utils/get-renderes"));
function addWarning(warningLog, msg, callsite = void 0) {
    const renderers = get_renderes_1.default(callsite);
    const renderedCallsite = render_callsite_sync_1.default(callsite, {
        renderer: renderers.noColor,
        stackFilter: create_stack_filter_1.default(Error.stackTraceLimit),
    });
    const isStringMsg = typeof msg === 'string';
    let message = isStringMsg ? msg.toString() : msg.message;
    const actionId = isStringMsg ? null : msg.actionId;
    message += `\n\n${renderedCallsite}`;
    warningLog.addWarning({ message, actionId });
}
exports.default = addWarning;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLXJlbmRlcmVkLXdhcm5pbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbm90aWZpY2F0aW9ucy9hZGQtcmVuZGVyZWQtd2FybmluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHlGQUErRDtBQUMvRCx3RkFBOEQ7QUFDOUQseUVBQWlEO0FBR2pELFNBQXdCLFVBQVUsQ0FBRSxVQUFzQixFQUFFLEdBQStCLEVBQUUsV0FBZ0IsS0FBSyxDQUFDO0lBQy9HLE1BQU0sU0FBUyxHQUFVLHNCQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEQsTUFBTSxnQkFBZ0IsR0FBRyw4QkFBa0IsQ0FBQyxRQUFRLEVBQUU7UUFDbEQsUUFBUSxFQUFLLFNBQVMsQ0FBQyxPQUFPO1FBQzlCLFdBQVcsRUFBRSw2QkFBaUIsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDO0tBQ3hELENBQUMsQ0FBQztJQUVILE1BQU0sV0FBVyxHQUFHLE9BQU8sR0FBRyxLQUFLLFFBQVEsQ0FBQztJQUM1QyxJQUFJLE9BQU8sR0FBUyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUUsR0FBeUIsQ0FBQyxPQUFPLENBQUM7SUFDdEYsTUFBTSxRQUFRLEdBQU0sV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFFLEdBQXlCLENBQUMsUUFBUSxDQUFDO0lBRTdFLE9BQU8sSUFBSSxPQUFPLGdCQUFnQixFQUFFLENBQUM7SUFFckMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ2pELENBQUM7QUFkRCw2QkFjQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZW5kZXJDYWxsc2l0ZVN5bmMgZnJvbSAnLi4vdXRpbHMvcmVuZGVyLWNhbGxzaXRlLXN5bmMnO1xuaW1wb3J0IGNyZWF0ZVN0YWNrRmlsdGVyIGZyb20gJy4uL2Vycm9ycy9jcmVhdGUtc3RhY2stZmlsdGVyJztcbmltcG9ydCBnZXRSZW5kZXJlcnMgZnJvbSAnLi4vdXRpbHMvZ2V0LXJlbmRlcmVzJztcbmltcG9ydCBXYXJuaW5nTG9nLCB7IFdhcm5pbmdMb2dNZXNzYWdlIH0gZnJvbSAnLi93YXJuaW5nLWxvZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZFdhcm5pbmcgKHdhcm5pbmdMb2c6IFdhcm5pbmdMb2csIG1zZzogV2FybmluZ0xvZ01lc3NhZ2UgfCBzdHJpbmcsIGNhbGxzaXRlOiBhbnkgPSB2b2lkIDApOiB2b2lkIHtcbiAgICBjb25zdCByZW5kZXJlcnMgICAgICAgID0gZ2V0UmVuZGVyZXJzKGNhbGxzaXRlKTtcbiAgICBjb25zdCByZW5kZXJlZENhbGxzaXRlID0gcmVuZGVyQ2FsbHNpdGVTeW5jKGNhbGxzaXRlLCB7XG4gICAgICAgIHJlbmRlcmVyOiAgICByZW5kZXJlcnMubm9Db2xvcixcbiAgICAgICAgc3RhY2tGaWx0ZXI6IGNyZWF0ZVN0YWNrRmlsdGVyKEVycm9yLnN0YWNrVHJhY2VMaW1pdCksXG4gICAgfSk7XG5cbiAgICBjb25zdCBpc1N0cmluZ01zZyA9IHR5cGVvZiBtc2cgPT09ICdzdHJpbmcnO1xuICAgIGxldCBtZXNzYWdlICAgICAgID0gaXNTdHJpbmdNc2cgPyBtc2cudG9TdHJpbmcoKSA6IChtc2cgYXMgV2FybmluZ0xvZ01lc3NhZ2UpLm1lc3NhZ2U7XG4gICAgY29uc3QgYWN0aW9uSWQgICAgPSBpc1N0cmluZ01zZyA/IG51bGwgOiAobXNnIGFzIFdhcm5pbmdMb2dNZXNzYWdlKS5hY3Rpb25JZDtcblxuICAgIG1lc3NhZ2UgKz0gYFxcblxcbiR7cmVuZGVyZWRDYWxsc2l0ZX1gO1xuXG4gICAgd2FybmluZ0xvZy5hZGRXYXJuaW5nKHsgbWVzc2FnZSwgYWN0aW9uSWQgfSk7XG59XG4iXX0=