"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const get_dashboard_url_1 = __importDefault(require("./get-dashboard-url"));
function decodeAuthenticationToken(token) {
    let tokenData;
    try {
        tokenData = JSON.parse(Buffer.from(token, 'base64').toString());
    }
    catch (e) { } // eslint-disable-line no-empty
    if (tokenData && tokenData.projectId && tokenData.tokenSecret)
        return tokenData;
    return void 0;
}
function getDefaultProjectLink(token) {
    const tokenData = decodeAuthenticationToken(token);
    return new URL(`/runs/${tokenData.projectId}`, get_dashboard_url_1.default()).toString();
}
exports.default = getDefaultProjectLink;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWRlZmF1bHQtcHJvamVjdC1saW5rLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Rhc2hib2FyZC9nZXQtZGVmYXVsdC1wcm9qZWN0LWxpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSw0RUFBa0Q7QUFFbEQsU0FBUyx5QkFBeUIsQ0FBRSxLQUFhO0lBQzdDLElBQUksU0FBUyxDQUFDO0lBRWQsSUFBSTtRQUNBLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7S0FDbkU7SUFDRCxPQUFPLENBQUMsRUFBRSxHQUFFLENBQUMsK0JBQStCO0lBRTVDLElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLFdBQVc7UUFDekQsT0FBTyxTQUFTLENBQUM7SUFFckIsT0FBTyxLQUFLLENBQUMsQ0FBQztBQUNsQixDQUFDO0FBRUQsU0FBd0IscUJBQXFCLENBQUUsS0FBYTtJQUN4RCxNQUFNLFNBQVMsR0FBRyx5QkFBeUIsQ0FBQyxLQUFLLENBQWlDLENBQUM7SUFFbkYsT0FBTyxJQUFJLEdBQUcsQ0FBQyxTQUFTLFNBQVMsQ0FBQyxTQUFTLEVBQUUsRUFBRSwyQkFBZSxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUNqRixDQUFDO0FBSkQsd0NBSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXNoYm9hcmRBdXRoZW50aWNhdGlvblRva2VuIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCBnZXREYXNoYm9hcmRVcmwgZnJvbSAnLi9nZXQtZGFzaGJvYXJkLXVybCc7XG5cbmZ1bmN0aW9uIGRlY29kZUF1dGhlbnRpY2F0aW9uVG9rZW4gKHRva2VuOiBzdHJpbmcpOiBEYXNoYm9hcmRBdXRoZW50aWNhdGlvblRva2VuIHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgdG9rZW5EYXRhO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgdG9rZW5EYXRhID0gSlNPTi5wYXJzZShCdWZmZXIuZnJvbSh0b2tlbiwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxuXG4gICAgaWYgKHRva2VuRGF0YSAmJiB0b2tlbkRhdGEucHJvamVjdElkICYmIHRva2VuRGF0YS50b2tlblNlY3JldClcbiAgICAgICAgcmV0dXJuIHRva2VuRGF0YTtcblxuICAgIHJldHVybiB2b2lkIDA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9qZWN0TGluayAodG9rZW46IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9rZW5EYXRhID0gZGVjb2RlQXV0aGVudGljYXRpb25Ub2tlbih0b2tlbikgYXMgRGFzaGJvYXJkQXV0aGVudGljYXRpb25Ub2tlbjtcblxuICAgIHJldHVybiBuZXcgVVJMKGAvcnVucy8ke3Rva2VuRGF0YS5wcm9qZWN0SWR9YCwgZ2V0RGFzaGJvYXJkVXJsKCkpLnRvU3RyaW5nKCk7XG59XG4iXX0=