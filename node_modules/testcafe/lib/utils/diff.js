"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
function getFullPropertyPath(property, parentProperty) {
    if (parentProperty)
        return `${parentProperty}.${property}`;
    return property;
}
function diff(source, modified, result, parentProperty = '') {
    for (const property in source) {
        const fullPropertyPath = getFullPropertyPath(property, parentProperty);
        if (!modified.hasOwnProperty(property))
            continue;
        const sourceValue = source[property];
        const modifiedValue = modified[property];
        if (sourceValue !== modifiedValue) {
            if (lodash_1.isObjectLike(sourceValue) && lodash_1.isObjectLike(modifiedValue))
                diff(sourceValue, modifiedValue, result, fullPropertyPath);
            else
                lodash_1.set(result, fullPropertyPath, modifiedValue);
        }
    }
}
exports.default = (source, modified) => {
    const result = {};
    if (lodash_1.isObjectLike(source) && lodash_1.isObjectLike(modified))
        diff(source, modified, result);
    return result;
};
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlmZi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9kaWZmLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQTJDO0FBRzNDLFNBQVMsbUJBQW1CLENBQUUsUUFBZ0IsRUFBRSxjQUFzQjtJQUNsRSxJQUFJLGNBQWM7UUFDZCxPQUFPLEdBQUcsY0FBYyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBRTNDLE9BQU8sUUFBUSxDQUFDO0FBQ3BCLENBQUM7QUFFRCxTQUFTLElBQUksQ0FBRSxNQUEwQixFQUFFLFFBQTRCLEVBQUUsTUFBMEIsRUFBRSxjQUFjLEdBQUcsRUFBRTtJQUNwSCxLQUFLLE1BQU0sUUFBUSxJQUFJLE1BQU0sRUFBRTtRQUMzQixNQUFNLGdCQUFnQixHQUFHLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUV2RSxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFDbEMsU0FBUztRQUViLE1BQU0sV0FBVyxHQUFLLE1BQU0sQ0FBQyxRQUFRLENBQXVCLENBQUM7UUFDN0QsTUFBTSxhQUFhLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBdUIsQ0FBQztRQUUvRCxJQUFJLFdBQVcsS0FBSyxhQUFhLEVBQUU7WUFDL0IsSUFBSSxxQkFBWSxDQUFDLFdBQVcsQ0FBQyxJQUFJLHFCQUFZLENBQUMsYUFBYSxDQUFDO2dCQUN4RCxJQUFJLENBQUMsV0FBVyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQzs7Z0JBRTNELFlBQUcsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxDQUFDLENBQUM7U0FDcEQ7S0FDSjtBQUNMLENBQUM7QUFFRCxrQkFBZSxDQUFDLE1BQTBCLEVBQUUsUUFBNEIsRUFBc0IsRUFBRTtJQUM1RixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7SUFFbEIsSUFBSSxxQkFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLHFCQUFZLENBQUMsUUFBUSxDQUFDO1FBQzlDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRW5DLE9BQU8sTUFBTSxDQUFDO0FBRWxCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldCwgaXNPYmplY3RMaWtlIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IERpY3Rpb25hcnkgfSBmcm9tICcuLi9jb25maWd1cmF0aW9uL2ludGVyZmFjZXMnO1xuXG5mdW5jdGlvbiBnZXRGdWxsUHJvcGVydHlQYXRoIChwcm9wZXJ0eTogc3RyaW5nLCBwYXJlbnRQcm9wZXJ0eTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAocGFyZW50UHJvcGVydHkpXG4gICAgICAgIHJldHVybiBgJHtwYXJlbnRQcm9wZXJ0eX0uJHtwcm9wZXJ0eX1gO1xuXG4gICAgcmV0dXJuIHByb3BlcnR5O1xufVxuXG5mdW5jdGlvbiBkaWZmIChzb3VyY2U6IERpY3Rpb25hcnk8b2JqZWN0PiwgbW9kaWZpZWQ6IERpY3Rpb25hcnk8b2JqZWN0PiwgcmVzdWx0OiBEaWN0aW9uYXJ5PG9iamVjdD4sIHBhcmVudFByb3BlcnR5ID0gJycpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIHNvdXJjZSkge1xuICAgICAgICBjb25zdCBmdWxsUHJvcGVydHlQYXRoID0gZ2V0RnVsbFByb3BlcnR5UGF0aChwcm9wZXJ0eSwgcGFyZW50UHJvcGVydHkpO1xuXG4gICAgICAgIGlmICghbW9kaWZpZWQuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgY29uc3Qgc291cmNlVmFsdWUgICA9IHNvdXJjZVtwcm9wZXJ0eV0gYXMgRGljdGlvbmFyeTxvYmplY3Q+O1xuICAgICAgICBjb25zdCBtb2RpZmllZFZhbHVlID0gbW9kaWZpZWRbcHJvcGVydHldIGFzIERpY3Rpb25hcnk8b2JqZWN0PjtcblxuICAgICAgICBpZiAoc291cmNlVmFsdWUgIT09IG1vZGlmaWVkVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdExpa2Uoc291cmNlVmFsdWUpICYmIGlzT2JqZWN0TGlrZShtb2RpZmllZFZhbHVlKSlcbiAgICAgICAgICAgICAgICBkaWZmKHNvdXJjZVZhbHVlLCBtb2RpZmllZFZhbHVlLCByZXN1bHQsIGZ1bGxQcm9wZXJ0eVBhdGgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNldChyZXN1bHQsIGZ1bGxQcm9wZXJ0eVBhdGgsIG1vZGlmaWVkVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCAoc291cmNlOiBEaWN0aW9uYXJ5PG9iamVjdD4sIG1vZGlmaWVkOiBEaWN0aW9uYXJ5PG9iamVjdD4pOiBEaWN0aW9uYXJ5PG9iamVjdD4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgaWYgKGlzT2JqZWN0TGlrZShzb3VyY2UpICYmIGlzT2JqZWN0TGlrZShtb2RpZmllZCkpXG4gICAgICAgIGRpZmYoc291cmNlLCBtb2RpZmllZCwgcmVzdWx0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG5cbn07XG4iXX0=