"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.stringify = exports.cleanUpFilter = void 0;
const util_1 = require("util");
const lodash_1 = require("lodash");
function cleanUpFilter(line) {
    return !line.match(/\\ No newline/);
}
exports.cleanUpFilter = cleanUpFilter;
function stringify(value) {
    if (lodash_1.isString(value) && value !== '')
        return value;
    if (lodash_1.isFunction(value))
        return value.toString();
    let valueToStringify = value;
    if (lodash_1.isBuffer(value))
        valueToStringify = Buffer.prototype.toJSON.call(value).data;
    return util_1.inspect(valueToStringify, { compact: false, sorted: true, depth: null })
        .split('\n')
        .map(line => line.replace(/,\s*$/, ''))
        .join('\n') || valueToStringify.toString;
}
exports.stringify = stringify;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy9kaWZmL3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsK0JBQStCO0FBQy9CLG1DQUlnQjtBQUVoQixTQUFnQixhQUFhLENBQUUsSUFBWTtJQUN2QyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN4QyxDQUFDO0FBRkQsc0NBRUM7QUFFRCxTQUFnQixTQUFTLENBQUUsS0FBVTtJQUNqQyxJQUFJLGlCQUFRLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxLQUFLLEVBQUU7UUFDL0IsT0FBTyxLQUFLLENBQUM7SUFFakIsSUFBSSxtQkFBVSxDQUFDLEtBQUssQ0FBQztRQUNqQixPQUFPLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUU1QixJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQztJQUU3QixJQUFJLGlCQUFRLENBQUMsS0FBSyxDQUFDO1FBQ2YsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQztJQUVoRSxPQUFPLGNBQU8sQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUM7U0FDMUUsS0FBSyxDQUFDLElBQUksQ0FBQztTQUNYLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxRQUFRLENBQUM7QUFDakQsQ0FBQztBQWhCRCw4QkFnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAndXRpbCc7XG5pbXBvcnQge1xuICAgIGlzRnVuY3Rpb24sXG4gICAgaXNCdWZmZXIsXG4gICAgaXNTdHJpbmcsXG59IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhblVwRmlsdGVyIChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIWxpbmUubWF0Y2goL1xcXFwgTm8gbmV3bGluZS8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5ICh2YWx1ZTogYW55KTogc3RyaW5nIHtcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpICYmIHZhbHVlICE9PSAnJylcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKVxuICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcblxuICAgIGxldCB2YWx1ZVRvU3RyaW5naWZ5ID0gdmFsdWU7XG5cbiAgICBpZiAoaXNCdWZmZXIodmFsdWUpKVxuICAgICAgICB2YWx1ZVRvU3RyaW5naWZ5ID0gQnVmZmVyLnByb3RvdHlwZS50b0pTT04uY2FsbCh2YWx1ZSkuZGF0YTtcblxuICAgIHJldHVybiBpbnNwZWN0KHZhbHVlVG9TdHJpbmdpZnksIHsgY29tcGFjdDogZmFsc2UsIHNvcnRlZDogdHJ1ZSwgZGVwdGg6IG51bGwgfSlcbiAgICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgICAubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC8sXFxzKiQvLCAnJykpXG4gICAgICAgIC5qb2luKCdcXG4nKSB8fCB2YWx1ZVRvU3RyaW5naWZ5LnRvU3RyaW5nO1xufVxuIl19