{"version":3,"file":"utils.js","sources":["../../../src/core/utils.ts","../../../src/svelte/utils.ts"],"sourcesContent":["/** @internal */\nexport const NULL = null;\n\n/** @internal */\nexport const { min, max, abs, floor } = Math;\n\n/**\n * @internal\n */\nexport const clamp = (\n  value: number,\n  minValue: number,\n  maxValue: number\n): number => min(maxValue, max(minValue, value));\n\n/**\n * @internal\n */\nexport const sort = <T extends number>(arr: readonly T[]): T[] => {\n  return [...arr].sort((a, b) => a - b);\n};\n\n/**\n * @internal\n */\nexport const microtask: (fn: () => void) => void =\n  typeof queueMicrotask === \"function\"\n    ? queueMicrotask\n    : (fn) => {\n        Promise.resolve().then(fn);\n      };\n\n/**\n * @internal\n */\nexport const createPromise = <T = void>(): [Promise<T>, (arg: T) => void] => {\n  let resolve: ((arg: T) => void) | undefined;\n  const promise = new Promise<T>((res) => {\n    resolve = res;\n  });\n  return [promise, resolve!];\n};\n\n/**\n * @internal\n */\nexport const once = <T>(fn: () => T): (() => T) => {\n  let cache: T;\n\n  return () => {\n    if (fn) {\n      cache = fn();\n      fn = undefined!;\n    }\n    return cache;\n  };\n};\n","import { sort, type ItemsRange } from \"../core/index.js\";\n\nexport const styleToString = (\n  obj: Record<string, string | undefined>\n): string => {\n  return Object.keys(obj).reduce((acc, k) => {\n    const value = obj[k];\n    if (value == null) {\n      return acc;\n    }\n    return acc + `${k}:${value};`;\n  }, \"\");\n};\n\nexport const defaultGetKey = (_data: unknown, i: number) => \"_\" + i;\n\nexport function* iterRange(\n  [start, end]: ItemsRange,\n  keepMounted?: readonly number[]\n) {\n  if (keepMounted) {\n    const mounted = new Set(keepMounted);\n    for (let i = start; i <= end; i++) {\n      mounted.add(i);\n    }\n    for (const index of sort([...mounted])) {\n      yield index;\n    }\n  } else {\n    for (let i = start; i <= end; i++) {\n      yield i;\n    }\n  }\n}\n"],"names":[],"mappings":"AAAA;AAeA;;AAEG;AACI,MAAM,IAAI,GAAG,CAAmB,GAAiB,KAAS;AAC/D,IAAA,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACvC,CAAC;;AClBM,MAAM,aAAa,GAAG,CAC3B,GAAuC,KAC7B;AACV,IAAA,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,KAAI;AACxC,QAAA,MAAM,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC;AACpB,QAAA,IAAI,KAAK,IAAI,IAAI,EAAE;AACjB,YAAA,OAAO,GAAG;QACZ;AACA,QAAA,OAAO,GAAG,GAAG,CAAA,EAAG,CAAC,CAAA,CAAA,EAAI,KAAK,GAAG;IAC/B,CAAC,EAAE,EAAE,CAAC;AACR;AAEO,MAAM,aAAa,GAAG,CAAC,KAAc,EAAE,CAAS,KAAK,GAAG,GAAG;AAE5D,UAAW,SAAS,CACxB,CAAC,KAAK,EAAE,GAAG,CAAa,EACxB,WAA+B,EAAA;IAE/B,IAAI,WAAW,EAAE;AACf,QAAA,MAAM,OAAO,GAAG,IAAI,GAAG,CAAC,WAAW,CAAC;AACpC,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;AACjC,YAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAChB;QACA,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,EAAE;AACtC,YAAA,MAAM,KAAK;QACb;IACF;SAAO;AACL,QAAA,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE;AACjC,YAAA,MAAM,CAAC;QACT;IACF;AACF;;;;"}